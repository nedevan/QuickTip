"use strict";(function(t){let e=function(o,l=null){function i(t,e=0){let o={id:0,isCanStep:!1};e-=1,e<0&&(e=0);for(let l=e;l>=0;l--)if(null!==u(t[l].object)){o.id=l,o.isCanStep=!0;break}return o}function n(){return document.body.scrollWidth}function s(){return document.body.scrollHeight}function c(){return document.documentElement.clientHeight}function u(t){if(""!==t&&null!=t){let e=t.split(":eq("),o=null,l=null,i=null;return void 0!==e[1]&&(l=e[0],e=e[1].split(")"),o=Number(e[0])),"number"==typeof o?(i=document.querySelectorAll(l)[o],void 0===i&&(i=null)):i=document.querySelector(t),i}}function r(t){return null!=t&&"none"!==t.style.display&&"0px"!==t.style.width&&"0px"!==t.style.height?(_=t.getBoundingClientRect(),_.OffsetTop=_.top+pageYOffset,_.OffsetBottom=_.bottom+pageYOffset,_.OffsetLeft=_.left+pageXOffset,_.OffsetRight=_.right+pageXOffset,_.centerTop=_.top+pageYOffset+_.height/2,_.centerLeft=_.left+pageXOffset+_.width/2,_):null}function p(t){if(null===R){let e=document.createElement("div");e.innerHTML=t,e=e.childNodes[1],Q=e.querySelector("#quick-tip-title"),V=e.querySelector("#quick-tip-text"),W=e.querySelector("#quick-tip-stop"),null!=W&&(W.onclick=function(){D.skip()}),F=e.querySelector("#quick-tip-next"),null!=F&&(F.onclick=function(){D.nextStep()}),G=e.querySelector("#quick-tip-previous"),null!=G&&(G.onclick=function(){D.previousStep()}),J=e.querySelector("#quick-tip-indicator"),R=e,Y=e.style}}function f(t){void 0===t.templateTitle&&null!=Q?Q.innerHTML="":null!=Q&&(Q.innerHTML=t.templateTitle),void 0===t.templateText&&null!=V?V.innerHTML="":null!=V&&(V.innerHTML=t.templateText),void 0===t.templateButtonStop&&null!=W?W.innerHTML="Пропустить":null!=W&&(W.innerHTML=t.templateButtonStop),void 0===t.templateButtonNext&&null!=F?F.innerHTML="Далее":null!=F&&(F.innerHTML=t.templateButtonNext),void 0===t.templateIndicator&&null!=J?J.innerHTML=D.getStep()+1+" из "+B.length:null!=J&&(J.innerHTML=t.templateIndicator)}function d(){if(null!==R){let t=_=R.getBoundingClientRect();return t.OffsetTop=t.top+pageYOffset,t.OffsetBottom=t.bottom+pageYOffset,t.OffsetLeft=t.left+pageXOffset,t.OffsetRight=t.right+pageXOffset,t.centerTop=t.top+pageYOffset+t.height/2,t.centerLeft=t.left+pageXOffset+t.width/2,t}return null}function y(t,e){setTimeout(function(){if(D.templateDefaultPosition)R.style=Y;else{R.style.transform="translate(0px, 0px)";let o=e.width+D.objectMargin,l=t.OffsetLeft,i=n()-t.OffsetRight;n()<374&&(o/=2),t.centerLeft===n()/2?R.style.left=t.centerLeft-e.width/2+D.offset.left+"px":t.centerLeft<o?t.OffsetLeft<10?R.style.left=t.OffsetLeft+10+D.offset.left+"px":R.style.left=t.OffsetLeft-l/2+D.offset.left+"px":t.centerLeft>n()-o?t.OffsetLeft>n()-10?R.style.left=t.OffsetRight-e.width-10+D.offset.left+"px":R.style.left=t.OffsetRight-e.width+i/2+D.offset.left+"px":R.style.left=t.centerLeft-e.width/2+D.offset.left+"px",t.OffsetTop>s()-e.height-2*D.objectMargin?(nt=!1,st=!0,R.style.top=t.OffsetTop-e.height-2*D.objectMargin+D.offset.top+"px"):(nt=!0,st=!1,R.style.top=t.OffsetTop+t.height+2*D.objectMargin+D.offset.top+"px"),c()/1.3-e.height<t.height&&(R.style.top=t.centerTop+D.offset.top+"px"),K.scrollIntoView({block:"center",inline:"center",behavior:"smooth"})}},I)}function v(){!1===X&&(document.body.append(R),X=!0)}function a(){null!==R&&(R.remove(),R=null),X=!1}function b(){null===ct&&null===ut&&null===rt&&null===pt?(dt=s()<t.innerHeight?"fixed":"absolute",ct=document.createElement("div"),ut=document.createElement("div"),rt=document.createElement("div"),pt=document.createElement("div"),ct.style.backgroundColor=D.blocksColor,ct.style.opacity=D.blocksOpacity,ct.style.zIndex=D.blocksZ,ct.style.position=dt,ct.style.left="0px",ct.style.top="0px",ct.style.right="0px",ct.style.bottom="0px",ut.style.backgroundColor=D.blocksColor,ut.style.opacity=D.blocksOpacity,ut.style.zIndex=D.blocksZ,ut.style.position=dt,ut.style.left="0px",ut.style.top="0px",ut.style.right="0px",ut.style.bottom="0px",rt.style.backgroundColor=D.blocksColor,rt.style.opacity=D.blocksOpacity,rt.style.zIndex=D.blocksZ,rt.style.position=dt,rt.style.left="0px",rt.style.top="0px",rt.style.right="0px",rt.style.bottom="0px",pt.style.backgroundColor=D.blocksColor,pt.style.opacity=D.blocksOpacity,pt.style.zIndex=D.blocksZ,pt.style.position=dt,pt.style.left="0px",pt.style.top="0px",pt.style.right="0px",pt.style.bottom="0px"):(ct.style.backgroundColor=D.blocksColor,ct.style.opacity=D.blocksOpacity,ct.style.zIndex=D.blocksZ,ut.style.backgroundColor=D.blocksColor,ut.style.opacity=D.blocksOpacity,ut.style.zIndex=D.blocksZ,rt.style.backgroundColor=D.blocksColor,rt.style.opacity=D.blocksOpacity,rt.style.zIndex=D.blocksZ,pt.style.backgroundColor=D.blocksColor,pt.style.opacity=D.blocksOpacity,pt.style.zIndex=D.blocksZ)}function h(e){let o=e.OffsetTop-D.objectMargin;ut.style.height=(o>0?o:0)+"px",ut.style.bottom="unset";let l="absolute"===dt?s()-(e.OffsetTop+e.height+D.objectMargin):t.innerHeight-(e.OffsetTop+e.height+D.objectMargin);pt.style.height=(l>0?l:0)+"px",pt.style.top="unset";let i=e.OffsetLeft-D.objectMargin;ct.style.width=(i>0?i:0)+"px",ct.style.top=o+"px",ct.style.bottom=l+"px",ct.style.right="unset";let c=n()-(e.OffsetLeft+D.objectMargin+e.width);rt.style.width=(c>0?c:0)+"px",rt.style.top=o+"px",rt.style.bottom=l+"px",rt.style.left="unset"}function k(){!1===ft&&(document.body.append(ct),document.body.append(ut),document.body.append(rt),document.body.append(pt),ft=!0)}function g(){null!==ct&&(ct.remove(),ct=null),null!==ut&&(ut.remove(),ut=null),null!==rt&&(rt.remove(),rt=null),null!==pt&&(pt.remove(),pt=null),ft=!1}function m(){if(null===yt)yt=document.createElement("div"),yt.style.position="absolute",yt.style.left="0px",yt.style.top="0px",yt.style.right="0px",yt.style.bottom="0px",yt.style.zIndex="9970";else{let t=yt.cloneNode(!0);A(),yt=t,yt.style.zIndex="9970"}}function x(t){yt.style.width=t.width+"px",yt.style.height=t.height+"px",yt.style.top=t.OffsetTop+"px",yt.style.left=t.OffsetLeft+"px",yt.style.right="unset",yt.style.bottom="unset",yt.style.cursor="pointer",yt.addEventListener("click",vt,!1)}function S(){D.triggerActive?document.body.append(yt):A()}function A(){null!=yt&&(yt.remove(),yt=null)}function O(){null===ot&&(null===lt&&(lt=document.querySelector("#quick-tip-tail")),null!==lt?(ot=lt,ot.style.position="absolute",ot.remove()):D.tailActive=!1)}function C(t,e){D.tailActive&&(ot.style.left=t.centerLeft-10+"px",nt&&(ot.style.transform="rotate(0deg)",ot.style.top=e.OffsetTop-20+"px"),st&&(ot.style.transform="rotate(180deg)",ot.style.top=e.OffsetTop+e.height+"px"))}function T(){D.tailActive&&!1===it&&(document.body.append(ot),it=!0)}function L(){null!==ot&&(ot.remove(),ot=null),it=!1}function M(){null===at&&(at=bt)}function j(){!1===ht&&(document.body.append(at),ht=!0)}function E(){null!=at&&(at.remove(),at=null),ht=!1}function P(){a(),L(),g(),E(),A(),document.body.style.overflow="auto",document.body.style.userSelect="auto",$=!1,gt=!1,mt=!1,null!==U&&U.removeEventListener("click",et,!1)}function w(t,e){if(e)throw t}function N(){St=!0,clearTimeout(At),$&&B.length>0&&St&&(a(),L(),g(),At=setTimeout(function(){D.step(!1),St=!1},z))}function Z(e){if(e=e||t.event,$)switch(e.keyCode){case 13:D.nextStep();break;case 27:case 35:P();break;case 32:D.nextStep();break;case 33:D.previousStep();break;case 34:D.nextStep();break;case 37:case 38:D.previousStep();break;case 39:case 40:case 98:D.nextStep();break;case 100:D.previousStep();break;case 102:D.nextStep();break;case 104:D.previousStep()}}const q=1e3,H=800,I=200,z=600;let D=this,B=[],$=!1,R=null,X=!1,Y=null,Q="Текст",V="Какой-то текст",W=null,F=null,G=null,J="1 из 3",K=null,U=null,_=null,tt={},et=null,ot=null,lt=null,it=!1,nt=!1,st=!1,ct=null,ut=null,rt=null,pt=null,ft=!1,dt="absolute",yt=null,vt=null,at=null,bt=null,ht=!1,kt=0,gt=!1,mt=!1,xt=0;e.prototype.blocksColor="#0f0f0f",e.prototype.blocksOpacity=.5,e.prototype.blocksZ=9900,e.prototype.delay=200,e.prototype.errorTimeout=4,e.prototype.objectMargin=4,e.prototype.offset={left:0,top:0},e.prototype.blocksActive=!0,e.prototype.tailActive=!0,e.prototype.triggerActive=!0,e.prototype.buttonStopActive=!0,e.prototype.buttonNextActive=!0,e.prototype.buttonPreviousActive=!0,e.prototype.templateDefaultPosition=!1,e.prototype.nextStep=function(){xt<B.length-1?(gt=!0,mt=!1,null!==U&&U.removeEventListener("click",et,!1),null!=l&&void 0!==l.onNext&&(w("Неверно объявлена функция onNext()","function"!=typeof l.onNext),l.onNext()),xt++,kt=0,this.step()):this.stop()},e.prototype.previousStep=function(){null!==U&&U.removeEventListener("click",et,!1),xt>0&&(gt=!1,mt=!0,null!=l&&void 0!==l.onPrevious&&(w("Неверно объявлена функция onPrevious()","function"!=typeof l.onPrevious),l.onPrevious()),xt--,kt=0,this.step())},e.prototype.setStep=function(t,e=!1){xt=t,e&&this.step()},e.prototype.getStep=function(){return xt},e.prototype.step=function(t=!0){$&&B.length>0&&null!=o&&(null!=l&&void 0!==l.blocksColor&&(this.blocksColor=l.blocksColor),void 0!==B[xt].blocksColor&&(this.blocksColor=B[xt].blocksColor),null!==l&&void 0!==l.blocksColor||void 0!==B[xt].blocksColor||(this.blocksColor="#0f0f0f"),null!=l&&void 0!==l.blocksOpacity&&(this.blocksOpacity=l.blocksOpacity),void 0!==B[xt].blocksOpacity&&(this.blocksOpacity=B[xt].blocksOpacity),null!==l&&void 0!==l.blocksOpacity||void 0!==B[xt].blocksOpacity||(this.blocksOpacity="0.5"),null!=l&&void 0!==l.blocksZ&&(this.blocksZ=l.blocksZ),void 0!==B[xt].blocksZ&&(this.blocksZ=B[xt].blocksZ),null!==l&&void 0!==l.blocksZ||void 0!==B[xt].blocksZ||(this.blocksZ="9000"),null!=l&&void 0!==l.templateDefaultPosition&&(this.templateDefaultPosition=l.templateDefaultPosition),void 0!==B[xt].templateDefaultPosition&&(this.templateDefaultPosition=B[xt].templateDefaultPosition),null!==l&&void 0!==l.templateDefaultPosition||void 0!==B[xt].templateDefaultPosition||(this.templateDefaultPosition=!1),null!=l&&void 0!==l.delay&&(this.delay=l.delay),void 0!==B[xt].delay&&(this.delay=B[xt].delay),null!==l&&void 0!==l.delay||void 0!==B[xt].delay||(this.delay=200),null!=l&&void 0!==l.objectMargin&&(this.objectMargin=l.objectMargin),void 0!==B[xt].objectMargin&&(this.objectMargin=B[xt].objectMargin),null!==l&&void 0!==l.objectMargin||void 0!==B[xt].objectMargin||(this.objectMargin=4),null!=l&&void 0!==l.blocksActive&&(this.blocksActive=l.blocksActive),void 0!==B[xt].blocksActive&&(this.blocksActive=B[xt].blocksActive),null!==l&&void 0!==l.blocksActive||void 0!==B[xt].blocksActive||(this.blocksActive=!0),null!=l&&void 0!==l.tailActive&&(this.tailActive=l.tailActive),void 0!==B[xt].tailActive&&(this.tailActive=B[xt].tailActive),null!==l&&void 0!==l.tailActive||void 0!==B[xt].tailActive||(this.tailActive=!0),null!=l&&void 0!==l.buttonStopActive&&(this.buttonStopActive=l.buttonStopActive),void 0!==B[xt].buttonStopActive&&(this.buttonStopActive=B[xt].buttonStopActive),null!==l&&void 0!==l.buttonStopActive||void 0!==B[xt].buttonStopActive||(this.buttonStopActive=!0),null!=l&&void 0!==l.buttonNextActive&&(this.buttonNextActive=l.buttonNextActive),void 0!==B[xt].buttonNextActive&&(this.buttonNextActive=B[xt].buttonNextActive),null!==l&&void 0!==l.buttonNextActive||void 0!==B[xt].buttonNextActive||(this.buttonNextActive=!0),null!=l&&void 0!==l.buttonPreviousActive&&(this.buttonPreviousActive=l.buttonPreviousActive),void 0!==B[xt].buttonPreviousActive&&(this.buttonPreviousActive=B[xt].buttonPreviousActive),null!==l&&void 0!==l.buttonPreviousActive||void 0!==B[xt].buttonPreviousActive||(this.buttonPreviousActive=!0),null!=l&&void 0!==l.triggerActive&&(this.triggerActive=l.triggerActive),void 0!==B[xt].triggerActive&&(this.triggerActive=B[xt].triggerActive),null!==l&&void 0!==l.triggerActive||void 0!==B[xt].triggerActive||(this.triggerActive=!0),null!=l&&void 0!==l.offset&&(this.offset=l.offset),void 0!==B[xt].offset&&(this.offset=B[xt].offset),null!==l&&void 0!==l.offset||void 0!==B[xt].offset||(this.offset={left:0,top:0}),null!=l&&void 0!==l.errorTimeout&&(this.errorTimeout=l.errorTimeout),void 0!==B[xt].errorTimeout&&(this.errorTimeout=B[xt].errorTimeout),null!==l&&void 0!==l.errorTimeout||void 0!==B[xt].errorTimeout||(this.errorTimeout=4),void 0!==B[xt].onStep&&t?(w("Неверно объявлена функция onStep()","function"!=typeof B[xt].onStep),B[xt].onStep()):null!=l&&void 0!==l.onStep&&t&&(w("Неверно объявлена функция onStep()","function"!=typeof l.onStep),l.onStep()),setTimeout(function(){if(K=u(B[xt].object),tt=r(K),null===tt)if(null===bt){if(null!=l&&void 0!==l.onStepError&&t&&(w("Неверно объявлена функция onStepError()","function"!=typeof l.onStepError),l.onStepError()),gt&&(this.nextStep(),w(`Шаг с элементом ${B[xt-1].object} не найден и будет пропущен.`,!0)),mt){let t=i(B,xt+1);t.isCanStep?(this.setStep(t.id,!0),w(`Шаг с элементом ${B[xt+1].object} не найден и будет пропущен.`,!0)):(this.setStep(xt+1,!0),w(`Шаг с элементом ${B[xt-1].object} не найден и будет пропущен.`,!0))}gt||mt||(D.nextStep(),w(`Шаг с элементом ${B[xt-1].object} не найден и будет пропущен.`,!0))}else M(),j(),setTimeout(function(){if($){if(kt++,kt>D.errorTimeout){if(null!=l&&void 0!==l.onStepError&&t&&(w("Неверно объявлена функция onStepError()","function"!=typeof l.onStepError),l.onStepError()),gt&&(D.nextStep(),w(`Шаг с элементом ${B[xt-1].object} не найден и будет пропущен.`,!0)),mt){let t=i(B,xt+1);t.isCanStep?(D.setStep(t.id,!0),w(`Шаг с элементом ${B[xt+1].object} не найден и будет пропущен.`,!0)):(D.setStep(xt+1,!0),w(`Шаг с элементом ${B[xt-1].object} не найден и будет пропущен.`,!0))}gt||mt||(D.nextStep(),w(`Шаг с элементом ${B[xt-1].object} не найден и будет пропущен.`,!0))}D.step()}},q);else E(),L(),void 0!==B[xt].onClick&&t?(w("Неверно объявлена функция onClick()","function"!=typeof B[xt].onClick),et=B[xt].onClick):null!=l&&void 0!==l.onClick&&t&&(w("Неверно объявлена функция onClick()","function"!=typeof l.onClick),et=l.onClick),p(o),v(),y(tt,d()),f(B[xt]),D.triggerActive||A(),D.triggerActive&&(void 0!==B[xt].triggerOnClick?(w("Неверно объявлена функция triggerOnClick()","function"!=typeof B[xt].triggerOnClick),vt=B[xt].triggerOnClick):null!=l&&void 0!==l.triggerOnClick&&(w("Неверно объявлена функция triggerOnClick()","function"!=typeof l.triggerOnClick),vt=l.triggerOnClick),m(),x(tt),S()),W.style.display=D.buttonStopActive?"block":"none",F.style.display=D.buttonNextActive?"block":"none",G.style.display=D.buttonPreviousActive?"block":"none",!D.blocksActive&&ft&&g(),D.blocksActive&&(b(),h(tt),k()),!D.tailActive&&ft&&L(),D.tailActive&&(O(),setTimeout(function(){C(tt,d()),T()},H)),gt=!1,mt=!1,K.addEventListener("click",et,!1),U=K},this.delay))},e.prototype.run=function(t=null){document.body.style.position="relative",document.body.style.overflow="hidden",document.body.style.userSelect="none",ht||null==l||void 0===l.onStart||(w("Неверно объявлена функция onStart()","function"!=typeof l.onStart),l.onStart()),$=!0,null===t?this.setStep(0):this.setStep(t),this.step()},e.prototype.set=function(t){B=t,this.step()},e.prototype.stop=function(){null!=l&&void 0!==l.onEnd&&(w("Неверно объявлена функция onEnd()","function"!=typeof l.onEnd),l.onEnd()),P()},e.prototype.skip=function(){null!=l&&void 0!==l.onSkip&&(w("Неверно объявлена функция onSkip()","function"!=typeof l.onSkip),l.onSkip()),P()},e.prototype.setPreloader=function(t){let e=document.createElement("div");e.innerHTML=t,e=e.childNodes[1],bt=e};let St=!1,At=null;t.addEventListener("resize",N,!0),t.addEventListener("keydown",Z,!0)};t.QuickTip=e})(window);